# 🤖 チャットボットアプリケーション

Streamlitを使用して構築された多機能なチャットボットアプリケーションです。ログイン認証、チャット機能、プロンプトライブラリ、分析機能などを備えています。

## ✨ 機能

### 🔐 認証システム
- セキュアなログイン機能
- 複数ユーザー対応
- セッション管理

### 💬 チャットボット
- **エコーモード**: シンプルなエコー応答
- **スマートモード**: 意図認識に基づく応答
- **プロンプト使用モード**: カスタムプロンプトを使用した応答
- 類似した過去の会話の表示
- 応答候補の提案
- リアルタイムメッセージ検証

### 📚 プロンプトライブラリ
- プロンプトの作成・編集・削除
- カテゴリ別管理
- 使用統計の追跡
- プロンプトの検索機能

### 💬 チャット履歴
- 過去のチャットセッションの保存・管理
- チャットの検索機能
- セッションのリネーム・削除
- チャットの再開機能

### 📊 分析ボット
- **ファイル分析**: CSV、Excel、JSON、テキストファイルの分析
- **チャット分析**: チャット履歴の統計分析
- **データエクスポート**: データのJSONエクスポート・インポート
- データ可視化とメトリクス

## 🚀 セットアップ

### 前提条件
- Python 3.12以上
- Poetry

### インストール

1. リポジトリをクローン:
```bash
git clone <repository-url>
cd agentic-rag-app
```

2. 依存関係をインストール:
```bash
poetry install
```

3. アプリケーションを起動:
```bash
poetry run streamlit run src/app.py
```

または:
```bash
streamlit run src/app.py
```

## 🔑 デフォルトのログイン情報

### 管理者アカウント
- **ユーザー名**: admin
- **パスワード**: 123456

### 一般ユーザーアカウント
- **ユーザー名**: user
- **パスワード**: abc123

## 📁 プロジェクト構造

```
agentic-rag-app/
├── src/
│   ├── app.py                 # メインアプリケーション
│   ├── utils/
│   │   ├── database.py        # データ管理クラス
│   │   ├── chatbot_helper.py  # チャットボット機能
│   │   └── styles.py          # CSSスタイル
│   └── pages/                 # 追加ページ（将来の拡張用）
├── data/                      # データファイル（自動生成）
│   ├── users.yaml            # ユーザー認証情報
│   ├── prompts.json          # プロンプトライブラリ
│   └── chat_history.json     # チャット履歴
├── tests/                     # テストファイル
├── pyproject.toml            # プロジェクト設定
├── poetry.lock               # 依存関係ロック
└── README.md                 # このファイル
```

## 🎯 使用方法

### 1. ログイン
アプリケーションを起動後、上記のデフォルトログイン情報を使用してログインしてください。

### 2. チャットボット
- 左サイドバーから「🤖 チャットボット」を選択
- 応答モードを選択（エコー、スマート、プロンプト使用）
- メッセージを入力してチャットを開始

### 3. プロンプトライブラリ
- 左サイドバーから「📚 プロンプトライブラリ」を選択
- 新しいプロンプトを追加または既存のプロンプトを編集
- カテゴリ別に整理して管理

### 4. チャット履歴
- 左サイドバーから「💬 チャット履歴」を選択
- 過去のチャットを検索・管理
- 必要に応じてチャットを再開

### 5. 分析機能
- 左サイドバーから「📊 分析ボット」を選択
- ファイル分析、チャット分析、データエクスポートを実行

## 🛠️ 主要な技術スタック

- **Frontend**: Streamlit
- **Authentication**: streamlit-authenticator
- **Data Storage**: JSON/YAML files
- **Analytics**: Pandas
- **Styling**: Custom CSS
- **Package Management**: Poetry

## 📈 データ管理

### データファイル
- `data/users.yaml`: ユーザー認証情報（ハッシュ化されたパスワード）
- `data/prompts.json`: プロンプトライブラリのデータ
- `data/chat_history.json`: チャット履歴データ

### バックアップ
データのバックアップは、分析ボットのエクスポート機能を使用して定期的に実行することをお勧めします。

## 🔧 カスタマイズ

### スタイルの変更
`src/utils/styles.py`でCSSスタイルをカスタマイズできます。

### 新しい機能の追加
- `src/utils/`にヘルパークラスを追加
- `src/app.py`に新しいページ関数を追加
- サイドバーメニューに新しいボタンを追加

## 🚨 注意事項

- このアプリケーションは開発・テスト目的で作成されています
- プロダクション環境での使用には追加のセキュリティ対策が必要です
- データファイルは定期的にバックアップしてください

## 📝 今後の改善予定

- [ ] 実際のAI APIとの統合
- [ ] データベース（SQLite/PostgreSQL）サポート
- [ ] ユーザー管理機能の強化
- [ ] API エンドポイントの追加
- [ ] 多言語サポート
- [ ] テーマの追加
- [ ] 通知機能
- [ ] ファイル添付機能

## 🤝 コントリビューション

プルリクエストやイシューの報告を歓迎します。改善提案がございましたら、お気軽にお知らせください。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。
